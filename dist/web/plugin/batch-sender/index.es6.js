var sd,_,sdkversion_placeholder="1.24.14";function wrapPluginInitFn(a,n,t){if(n&&(a.plugin_name=n),t&&a.init){var e=a.init;a.init=function(n,r){if(n.readyState&&n.readyState.state>=3||!n.on)return s();function s(){e.call(a,n,r)}n.on(t,s)}}return a}function createPlugin(a,n,t){return wrapPluginInitFn(a,n,t),a.plugin_version=sdkversion_placeholder,a}var batchInstance=null;function sendData(a,n){return!sd.para.app_js_bridge&&sd.para.batch_send&&_.localStorage.isSupport()&&localStorage.length<sd.para.batch_send.storage_length&&(batchInstance.add(a.data),n.cancellationToken.stop()),a}function initPara(){var a={datasend_timeout:6e3,send_interval:6e3,storage_length:200};_.localStorage.isSupport()&&_.isSupportCors()&&"object"==typeof localStorage?!0===sd.para.batch_send?sd.para.batch_send=_.extend({},a):"object"==typeof sd.para.batch_send&&(sd.para.batch_send=_.extend({},a,sd.para.batch_send)):sd.para.batch_send=!1}function senderInit(){sd.on("sdkInitPara",function(){initPara()}),sd.on("sdkAfterInitPara",function(){!sd.para.app_js_bridge&&sd.para.batch_send&&_.localStorage.isSupport()&&(batchInstance||(batchInstance=new _.BatchSend),batchInstance.batchInterval(),sd.registerInterceptor("sendDataStage",{send:{priority:100,entry:sendData}}))})}var BatchSender={plugin_name:"BatchSender",init:function(a){_=(sd=a)._,senderInit()}},index=createPlugin(BatchSender);export default index;