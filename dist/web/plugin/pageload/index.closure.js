!function(){"use strict";function e(e,n,t){if(n&&(e.plugin_name=n),t&&e.init){var r=e.init;e.init=function(n,i){function o(){r.call(e,n,i)}return n.readyState&&n.readyState.state>=3||!n.on?o():void n.on(t,o)}}return e}function n(n,r,i){return e(n,r,i),n.plugin_version=t,n}var t="1.24.14",r=!1,i={init:function(e,n){function t(n,t){if(n.getEntries&&"function"==typeof n.getEntries){for(var r=n.getEntries(),i=null,o=0;o<r.length;o++)"transferSize"in r[o]&&(i+=r[o].transferSize);e._.isNumber(i)&&i>=0&&i<10737418240&&(t.$page_resource_size=Number((i/1024).toFixed(3)))}}function i(n){var t=0;if(n.timing){var r=n.timing;0!==r.fetchStart&&e._.isNumber(r.fetchStart)&&0!==r.domContentLoadedEventEnd&&e._.isNumber(r.domContentLoadedEventEnd)?t=r.domContentLoadedEventEnd-r.fetchStart:e.log("performance \u6570\u636e\u83b7\u53d6\u5f02\u5e38")}return t}function o(n){var t=0;if(e._.isFunction(n.getEntriesByType)){var r=n.getEntriesByType("navigation")||[{}];t=(r[0]||{}).domContentLoadedEventEnd||0}return t}function a(){var d=0,u=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,c={$url:e._.getURL(),$title:document.title,$url_path:e._.getURLPath(),$referrer:e._.getReferrer(null,!0)};if(u?(d=o(u)||i(u),t(u,c)):e.log("\u6d4f\u89c8\u5668\u672a\u652f\u6301 performance API."),d>0){var f=e._.isObject(n)&&n.max_duration||1800;d=Number((d/1e3).toFixed(3)),(!e._.isNumber(f)||f<=0||d<=f)&&(c.event_duration=d)}r||(e.track("$WebPageLoad",c),r=!0),window.removeEventListener?window.removeEventListener("load",a):window.detachEvent&&window.detachEvent("onload",a)}"complete"==document.readyState?a():window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a)}},o=n(i,"PageLoad","sdkReady");return o}();